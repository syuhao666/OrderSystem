<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <title th:text="${user.id != null ? '編輯使用者' : '新增使用者'}"></title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    .sidebar { background-color: #343a40; }
    .sidebar a { color: #adb5bd; text-decoration: none; padding: 10px 20px; display: flex; align-items: center; }
    .sidebar a.active, .sidebar a:hover { background-color: #495057; color: #fff; }
    .sidebar i { margin-right: 10px; }
  </style>
</head>

<body th:with="activePage='customer'">
  <div class="container-fluid">
    <div class="row g-0">
      <!-- 左側導覽列 (Fragment) -->
      <div th:replace="~{fragments/sidebar :: sidebar}"></div>

      <!-- 主內容 (grid column) -->
      <main class="col-12 col-md-9 col-lg-10 bg-white min-vh-100 p-4">
        <h2 class="mb-3" th:text="${user.id != null ? '編輯使用者' : '新增使用者'}"></h2>
        <form th:action="@{/admin/customers/save}" th:object="${user}" method="post" class="mt-3">
          <input type="hidden" th:field="*{id}" />

          <div class="mb-3">
            <label class="form-label">帳號：</label>
            <input type="text" class="form-control" th:field="*{username}" required />
          </div>

          <div class="mb-3">
            <label class="form-label">密碼：</label>
            <input type="password" class="form-control" th:field="*{password}" required />
          </div>

          <div class="mb-3">
            <label class="form-label">Email：</label>
            <input type="email" class="form-control" th:field="*{email}" required />
          </div>

          <div class="mb-3">
            <label class="form-label">地址：</label>
            <input type="text" class="form-control" th:field="*{address.address}" placeholder="例如：台北市信義區松仁路123號" />
          </div>

          <div class="mb-3">
            <label class="form-label">角色：</label>
            <select class="form-select" th:field="*{role}" required>
              <option value="customer">customer</option>
              <option value="ADMIN">ADMIN</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary">儲存</button>
          <a th:href="@{/admin/customers}" class="btn btn-secondary ms-2">取消</a>
        </form>
      </main>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
